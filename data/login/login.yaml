
#allure基础信息配置
allure_params:
  allureEpic: "电气项目"
  allureFeature: "登录"
  allureStory: "登录接口"

case_login_01:
  - step: 1
    #${xxx}表示从配置文件中获取值，${{xxx()}}表示从deps文件中调用方法，${{xxx}}表示缓存存取文件名
    host: ${host}
    url: /nbcio-boot/sys/login
    method: POST
    title: 验证账号密码正确，登录成功
    headers:
      content-type: application/json
      User-Agent: Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Mobile Safari/537.36
    #请求参数分为4种类型，values根据类型传入不同的参数
    data:
      type: json
      values: {"username": "admin", "password": "123456", "captcha": "${{main()}}", "checkKey": 1716172800254,
              "remember_me": True}
    #空、true默认执行，false不执行该用例
    is_run:
    #是否在接口返回值存入缓存中，type: redis | text ，放入配置文件中，总的来控制是使用文本还是redis存缓存数据
    sava_cache:
      is_cache: true #如果不写此项、为空、false，则认为不开启
      #可能存在多个需要存的值
      rules:
        - type: response
          jsonpath: $.result.token  # 采用jsonpath提取值
          name: ${{token}}
    #断言，可以存在多个
    asserts:
      rules:
        - jsonpath: $.success
          type: ==
          value: true   #预期结果
